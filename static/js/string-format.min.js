(function(){var g,d,e,h,j,a,i,b=function(n,l){for(var k in l){if(f.call(l,k)){n[k]=l[k]}}function m(){this.constructor=n}m.prototype=l.prototype;n.prototype=new m();n.__super__=l.prototype;return n},f={}.hasOwnProperty,c=[].slice;g=(function(l){b(k,l);function k(m){this.message=m}k.prototype.name="ValueError";return k})(Error);j="cannot switch from implicit to explicit numbering";e="cannot switch from explicit to implicit numbering";d=function(k){if(k==null){k={}}return function(){var o,n,l,m,q,p;p=arguments[0],o=2<=arguments.length?c.call(arguments,1):[];l=0;n=m=false;q="cannot switch from {} to {} numbering";return p.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,function(t,v,u,s){var x,w,r;if(v){return v}if(u.length){if(m){throw new g(j)}n=true;x=(w=a(o,u))!=null?w:""}else{if(n){throw new g(e)}m=true;x=(r=o[l++])!=null?r:""}if(Object.prototype.hasOwnProperty.call(k,s)){return k[s](x)}else{return x}})}};a=function(l,m){var k;if(!/^(\d+)([.]|$)/.test(m)){m="0."+m}while(k=/(.+?)[.](.+)/.exec(m)){l=i(l,k[1]);m=k[2]}return i(l,m)};i=function(k,l){var m;m=k[l];if(typeof m==="function"){return m.call(k)}else{return m}};h=d({});h.create=d;h.extend=function(l,m){var k;k=d(m);l.format=function(){return k.apply(null,[this].concat(c.call(arguments)))}};if(typeof module!=="undefined"){module.exports=h}else{if(typeof define==="function"&&define.amd){define(h)}else{window.format=h}}}).call(this);